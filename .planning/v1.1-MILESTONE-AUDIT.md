---
milestone: v1.1
audited: 2026-02-22T22:15:00Z
status: gaps_found
scores:
  requirements: 11/14
  phases: 3/3 (in-scope)
  integration: 12/15
  flows: 2/4
gaps:
  requirements:
    - id: "CUT-05"
      status: "unsatisfied"
      phase: "Phase 11"
      claimed_by_plans: ["11-02-PLAN.md"]
      completed_by_plans: []
      verification_status: "missing"
      evidence: "11-02-SUMMARY says 'documented, not tested'. Requirement text says 'documented and tested'. Rollback procedure exists in SUMMARY but was never executed. Original ContextForge MCP wrapper command not recorded — re-registration would require reconstruction."
    - id: "CUT-04"
      status: "partial"
      phase: "Phase 11"
      claimed_by_plans: ["11-02-PLAN.md"]
      completed_by_plans: ["11-02-SUMMARY.md"]
      verification_status: "missing"
      evidence: "6 of 7 backends verified working. Exa disabled in sentinel.toml (needs EXA_API_KEY). Requirement says 'all 7 backends'. FIRECRAWL_API_KEY env wiring is fragile — works via inherited process env, not durable MCP config."
    - id: "CUT-01"
      status: "partial"
      phase: "Phase 11"
      claimed_by_plans: ["11-02-PLAN.md"]
      completed_by_plans: ["11-02-SUMMARY.md"]
      verification_status: "missing"
      evidence: "Work completed per 11-02-SUMMARY (ContextForge stopped, containers preserved). REQUIREMENTS.md checkbox not updated from [ ] to [x]. No VERIFICATION.md for Phase 11."
  integration:
    - from: "add-mcp.sh"
      to: "FIRECRAWL_API_KEY"
      issue: "Firecrawl API key not in MCP env block. Works now via inherited process env but is not durable wiring."
      affected_requirements: ["CUT-04"]
    - from: "sentinel.toml"
      to: "health_listen port"
      issue: "health_listen not explicit in config — relies on hardcoded default 127.0.0.1:9201. Firewall rules target 9201; if default changes, silent mismatch."
      affected_requirements: ["NET-02", "NET-03"]
    - from: "~/.claude.json"
      to: "MCP registration"
      issue: "Duplicate sentinel-gateway registration under /home/lwb3 and /home/lwb3/sentinel-gateway project scopes. Could spawn two instances causing port conflict."
      affected_requirements: ["CUT-02", "CUT-03"]
  flows:
    - name: "Rollback to ContextForge"
      breaks_at: "Test step — procedure documented but never executed"
      affected_requirements: ["CUT-05"]
    - name: "Full backend verification"
      breaks_at: "Exa disabled (6/7 active); Firecrawl key wiring fragile"
      affected_requirements: ["CUT-04"]
tech_debt:
  - phase: 10-pre-cutover-preparation
    items:
      - "No VERIFICATION.md — phase executed in manual sessions before GSD verification was established"
      - "sentinel-docker.toml is orphaned dead config (Docker gateway removed in Phase 11)"
  - phase: 11-cutover-execution
    items:
      - "No VERIFICATION.md — phase executed across multiple manual sessions"
      - "REQUIREMENTS.md checkboxes for CUT-01, CUT-04, CUT-05 not updated"
      - "Original ContextForge MCP wrapper command not recorded for rollback"
  - phase: 12-network-hardening
    items:
      - "External port scan from outside VPS not done (optional confidence check, not a blocker)"
---

# v1.1 "Deploy & Harden" Milestone Audit

**Milestone:** v1.1 Deploy & Harden
**Audited:** 2026-02-22
**Status:** gaps_found
**Phases in scope:** 10, 11, 12 (all complete)
**Phases not yet started:** 13 (Monitoring), 14 (Operations)

## Executive Summary

Phases 10-12 successfully deployed Sentinel Gateway as the live MCP gateway, replacing ContextForge. The binary runs natively via stdio, all active backends respond, and network hardening is in place. However, **3 requirements have gaps**: CUT-05 (rollback untested), CUT-04 (exa disabled + fragile Firecrawl wiring), and CUT-01 (documentation sync). None of these are operationally critical — Sentinel is working — but they represent incomplete verification against the stated requirements.

## Requirements Coverage (3-Source Cross-Reference)

### Phase 10: Pre-Cutover Preparation

| REQ-ID | VERIFICATION.md | SUMMARY Frontmatter | REQUIREMENTS.md | Final Status |
|--------|----------------|---------------------|-----------------|--------------|
| PREP-01 | missing | 10-01: listed | `[x]` Done | **satisfied** (strong SUMMARY evidence) |
| PREP-02 | missing | 10-01: listed | `[x]` Done | **satisfied** (strong SUMMARY evidence) |
| PREP-03 | missing | 10-01: listed | `[x]` Done | **satisfied** (strong SUMMARY evidence) |
| PREP-04 | missing | 10-01: listed | `[x]` Done | **satisfied** (strong SUMMARY evidence) |
| PREP-05 | missing | 10-02: listed | `[x]` Done | **satisfied** (strong SUMMARY evidence) |

### Phase 11: Cutover Execution

| REQ-ID | VERIFICATION.md | SUMMARY Frontmatter | REQUIREMENTS.md | Final Status |
|--------|----------------|---------------------|-----------------|--------------|
| CUT-01 | missing | 11-02: described | `[ ]` Pending | **partial** — work done, checkbox not updated |
| CUT-02 | missing | 11-01: frontmatter `[CUT-02]` | `[x]` Complete | **satisfied** |
| CUT-03 | missing | 11-01: frontmatter `[CUT-03]` | `[x]` Complete | **satisfied** |
| CUT-04 | missing | 11-02: described (6/7 backends) | `[ ]` Pending | **partial** — exa disabled, Firecrawl fragile |
| CUT-05 | missing | 11-02: "documented, not tested" | `[ ]` Pending | **unsatisfied** — rollback never tested |

### Phase 12: Network Hardening

| REQ-ID | VERIFICATION.md | SUMMARY Frontmatter | REQUIREMENTS.md | Final Status |
|--------|----------------|---------------------|-----------------|--------------|
| NET-01 | passed | 12-01: frontmatter `[NET-01]` | `[x]` Complete | **satisfied** |
| NET-02 | passed | 12-01: frontmatter `[NET-02]` | `[x]` Complete | **satisfied** |
| NET-03 | passed | 12-01: frontmatter `[NET-03]` | `[x]` Complete | **satisfied** |
| NET-04 | passed | 12-01: frontmatter `[NET-04]` | `[x]` Complete | **satisfied** |

**Score: 11/14 satisfied** (3 partial/unsatisfied)

## Phase Verification Status

| Phase | VERIFICATION.md | Status | Notes |
|-------|----------------|--------|-------|
| 10 | Missing | No formal verification | Executed in manual sessions before GSD verify step |
| 11 | Missing | No formal verification | Executed across multiple manual sessions |
| 12 | Present, passed | 4/4 must-haves | Full automated verification |

## Cross-Phase Integration

| Connection | From → To | Status |
|-----------|-----------|--------|
| Docker compose → native deployment | Phase 10 → Phase 11 | WIRED |
| Production .env → add-mcp.sh | Phase 10 → Phase 11 | WIRED |
| sentinelnet network → sidecars | Phase 10 → Phase 11 → Phase 12 | WIRED |
| Native binary → iptables hardening | Phase 11 → Phase 12 | WIRED |
| ContextForge stopped → network cleanup | Phase 11 → Phase 12 | WIRED |
| FIRECRAWL_API_KEY → MCP env | Phase 10 → Phase 11 | FRAGILE — inherited env, not in MCP config |
| health_listen → iptables rules | sentinel.toml → fix-iptables.sh | FRAGILE — relies on hardcoded default |
| MCP registration → Claude Code | Phase 11 → runtime | WIRED (duplicate registration is low-risk) |

**Score: 12/15 connections wired** (3 fragile/missing)

## E2E Flow Verification

| Flow | Status | Issue |
|------|--------|-------|
| MCP stdio dispatch (tool call → backend → response) | ✓ Complete | All 6 active backends working |
| Network hardening persistence (reboot → iptables restore) | ✓ Complete | fix-iptables.sh + systemd service |
| Full 7-backend verification | ⚠ Partial | Exa disabled, Firecrawl key fragile |
| Rollback to ContextForge | ✗ Not tested | Procedure documented, never executed |

**Score: 2/4 flows complete**

## Tech Debt Summary

### Phase 10: Pre-Cutover Preparation
- No VERIFICATION.md (executed before GSD verification was established)
- `sentinel-docker.toml` is orphaned dead config (Docker gateway removed in Phase 11)

### Phase 11: Cutover Execution
- No VERIFICATION.md (executed across multiple manual sessions)
- REQUIREMENTS.md checkboxes for CUT-01, CUT-04 not updated to `[x]`
- Original ContextForge MCP wrapper command not recorded for rollback

### Phase 12: Network Hardening
- External port scan from outside VPS not done (optional confidence check)

**Total: 6 items across 3 phases**

## Actionable Gaps (Priority Order)

### High — Affects Durability

1. **CUT-05 (Rollback untested):** Execute the rollback procedure once: stop Sentinel sidecars, `docker compose -f /home/lwb3/mcp-context-forge/docker-compose.yml start`, verify ContextForge serves MCP traffic, then reverse. Record the ContextForge MCP wrapper command.

2. **CUT-04 (Firecrawl key fragility):** Add `FIRECRAWL_API_KEY` to the MCP env block in `add-mcp.sh`, or change `main.rs` to load `.env` from an absolute path. Current wiring depends on inherited process env that won't survive Claude Code reinstall/reauth.

### Medium — Documentation Sync

3. **REQUIREMENTS.md checkbox updates:** Mark CUT-01 as `[x]`, update CUT-04 text to "all active backends (6 of 7; exa deferred pending EXA_API_KEY)" and mark `[x]`.

4. **CUT-04 (Exa):** Either obtain `EXA_API_KEY` and uncomment exa in sentinel.toml, or formally document exa as deferred to v1.2+.

### Low — Fragility, Not Broken

5. **Explicit health_listen:** Add `health_listen = "127.0.0.1:9201"` to `sentinel.toml` so firewall rules can't silently mismatch a future default change.

6. **Duplicate MCP registration:** Remove the `/home/lwb3/sentinel-gateway` project-scoped registration from `~/.claude.json` — only the `/home/lwb3` scope is needed.

7. **Dead config cleanup:** Remove `sentinel-docker.toml` (orphaned after Phase 11 removed Docker gateway).

---

*Audited: 2026-02-22T22:15:00Z*
*Auditor: Claude (gsd milestone audit)*
